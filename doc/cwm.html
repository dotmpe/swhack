<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Semantic Web Application Platform</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <link href="/StyleSheets/base.css" rel="stylesheet" type="text/css">
</head>

<body>
<p><a href="/">W3C </a>| <a href="/2000/01/sw/Overview.html">Semantic
Web</a></p>

<p></p>

<h1>Cwm</h1>

<p></p>

<p>Cwm is a general-purpose data processor for the semantic web.  It is a
forward chaining reasoner which can be used fro analysing, checking,
transfroming and filtering information.  Its core language is RDF, extended
to include rules, and it uses RDF/XML or N3 serializations as required.</p>

<p>Originally, from "Closed world machine" because it procesed infromation in
a limited, cwm does not make any assumptions about a closed world.  Think of
it as defined area but with openings - like a valley.</p>

<p></p>
<ul>
  <li><a href="../Overview.html">Semantic Web Application Platform</a></li>
  <li><a href="http://infomesh.net/2001/cwm/">Sean Palmer's guide to
  cwm</a></li>
</ul>

<h2>Source</h2>

<p>This <a href="http://dev.w3.org/cvsweb/2000/10/swap/">stuff</a> is not
guaranteed but is open source and available from the <a
href="http://dev.w3.org/cvsweb/">public w3c CVS repository</a>.</p>

<p>Check out *.py from the top level of the swap hierarchy to use it, check
out the whole tree to develop.</p>

<p>Set up an alias (.bat file, etc) to make the cwm command  cwm="python
/wherever/cwm.py"</p>

<p></p>

<h2 id="Python">Python modules</h2>

<h3>Don't trust the doc</h3>

<p>The best test of works is what has been tested.  So the list of files in
the <a href="../test/retest.sh">regression test</a> defines the set of
features which are generally checked on each checkin.</p>

<h3 id="Closed">Closed World Machine : cwm.py</h3>

<p>This is a general purpose command-line application, in which triples are
stored in/against the particular context in which they were read, eg RDF file
or N3 { expression }. The features at the moment include</p>
<ul>
  <li>Loading files in RDF and/or N3</li>
  <li>Applying rules written in N3 to the data.</li>
  <li>Filtering the data to the result of a particular query</li>
  <li>Generating RDF or N3 files from the result.</li>
  <li>Pretty printing data so that anonymous nodes are used creatively to
    minimize the number of explicit existentials (generated Ids).</li>
</ul>

<p></p>

<p>Cwm will run as a unix command, and is designed to be usable as a simple
data manipulator for RDF on the lines of sed, awk, etc or xsl.</p>

<p>In progress.</p>
<ul>
  <li><a href="cwm.py">Source</a></li>
</ul>

<h4 id="Command">Command line parameters</h4>

<p>Some, marked (flag), can occur anywhere on the command line.  The others
are processed in order from left to right.</p>
<dl>
  <dt>--help</dt>
    <dd>generate a  more up to date list of parameters</dd>
  <dt>--pipe</dt>
    <dd>don't store, just process serially. (doesn't lose comment lines!)
      (flag)</dd>
  <dt>--rdf</dt>
    <dd>input/output format XML/RDF format from now on</dd>
  <dt>--rdf=flags</dt>
    <dd>as above but sets flags as to ho wRDF is written</dd>
  <dt>--n3</dt>
    <dd>input/output is Notation3 from now on.</dd>
  <dt>--n3=flags</dt>
    <dd>as above, but also customizes N3 output.  cwm --help for list of
    flags</dd>
  <dt>--ntriples</dt>
    <dd>As for n3, but customizied to produce the "ntriples" N3 subset.</dd>
  <dt>--rdf1out</dt>
    <dd>output format is RDF. (flag)</dd>
  <dt><em>uri</em></dt>
    <dd>load the resource. Parsed relative to the local directory, so a
      filename will work.</dd>
  <dt>--size</dt>
    <dd>Output the current size of the store.</dd>
  <dt>--apply=<em>uri</em></dt>
    <dd>Apply the rules in a given resource, once each, to the store, the
      conclusions being added to the store.</dd>
  <dt>--filter=<em>uri</em></dt>
    <dd>Apply the rules in a given resource, once each, to the store,
      replacing the original contents of the store with those things
      concluded from the rules.</dd>
  <dt>--rules</dt>
    <dd>Apply any rules in the store to the store itself, conclusions being
      added to the store.</dd>
  <dt>--think</dt>
    <dd>Do --rules and go on doing it until no more is generated.</dd>
  <dt>--purge</dt>
    <dd>Removes any triple containing a term that is declared to be of
      rdf:type log:Chaff</dd>
  <dt>--ugly</dt>
    <dd>Dump the store in a more or less random order. This tends to be
      messy, as related information is not grouped.</dd>
  <dt>--bySubject</dt>
    <dd>Dump the store grouping statements by subject. This tends to be
      better than -ugly, but the default is to make the output as readable as
      possible using anonymous nodes wherever possible, and is therefore
      recommended. (flag)</dd>
  <dt>--strings</dt>
    <dd>Output the objects of log:outputString statements, ordered by the
      subject</dd>
</dl>

<p>Note that where a <em>uri </em>is given, this can be a filename of course.
The default base URI of the process is the file URI of a file in the current
working directory, so a local filename will be a valid relative URI. This is
how URIs were supposed to work.</p>

<h4 id="Rule">Rule file format</h4>

<p>A rule file is simply a notation3 file. A rule is a statement which
asserts an implication using log:imples (where the namespace must be
http://www.w3.org/2000/10/swap/log#) between premise and a conclusion. The
premise is simply a template: cwm will search for all combinations of
statements in the store which match the template.  Variables must be
explicitly connected to the enclosing context (often, the document) by a
"log:forAll" statement. For each match, a conclusion is formed by taking the
conclusion and in it replacing any variables which have been matched with the
values found. The following is an example:</p>
<pre>@prefix log: &lt;http://www.w3.org/2000/10/swap/log#&gt; .
@prefix mech: &lt;s1.n3#&gt; .

this log:forAll &lt;#x&gt; , &lt;#y&gt; .
{ &lt;#x&gt; mech:includes &lt;#y&gt; } log:implies { &lt;#y&gt; mech:partOf &lt;#x&gt; } .</pre>

<p>The @prefix directives define the prefixes log: and mech: as representing
namespaces.   The this log:forAll line declares #x and #y, two local
identifiers, as being univerlly quantified variables in the context of this
formula (this).</p>

<h3 id="L133">Serializing/deserializaing RDF: notation3.py</h3>

<p>Originally written by Dan Connolly, uses a basic RDF stream parser
interface</p>
<ul>
  <li>Parses N3</li>
  <li>Generates RDF</li>
  <li>Generates N3</li>
</ul>

<p>The command line form  (alias n3 python notation3.py; n3 -help) allows RDF
to be parsed and re-output.</p>

<p>The module will also run as a CGI script to convert N3 to RDF M&amp;S 1.0
- by DanC magic.</p>
<ul>
  <li><a href="notation3.py">Source</a></li>
</ul>

<h3 id="L311">xml2rdf.py   Parsing RDF/XML</h3>

<p>Based on Python's xmllib, this parser is ocmpatible with the RDF stream
interface of, notation3.py.  It completes the square of parsers and
generators.  <strong>Defunct. Now use sax parser and sax2rdf.py.</strong></p>
<ul>
  <li>Parses RDF</li>
</ul>

<p>It has a command line mode for self-test purposes.</p>
<ul>
  <li><a href="xml2rdf.py">Source</a></li>
</ul>

<p></p>

<p></p>

<h2><a name="Design">Design issues</a></h2>

<p>The code above investigated and raised issues discussed in the following
documents.</p>
<ul>
  <li><a href="/DesignIssues/Notation3.html">Notation 3 - an alternative RDF
    syntax</a></li>
  <li><a href="/DesignIssues/Anonymous.html">Quantification implicit in
    anonymous nodes</a></li>
</ul>

<p>not to mention</p>
<ul>
  <li>RDFM&amp;S and schema issues</li>
  <li>The question of quoting and BagIDs etc</li>
</ul>

<h2>Acknowledgements</h2>

<p>Thanks to Dan Connolly for writing the first code and introducing me to
Python, and him and Sean Palmer for writing code. Thanks to Sean for his <a
href="http://infomesh.net/2001/cwm/">guide</a> to cwm.  Thanks for all on
#RDFIG for being everything which #RDFIG is.</p>

<h2 id="Related">Related work</h2>
<ul>
  <li>Jos De Roo, AGFA,<a href="http://www.agfa.com/w3c/euler/">Euler Proof
    Mechaism</a></li>
</ul>

<h2>Places to talk about this</h2>
<ul>
  <li>The RDF Interest group</li>
  <li>#RDFIG irc channel</li>
</ul>
<hr>

<p></p>
<address>
  <p>Tim BL, with his director hat off<br>
  $Id$</p>

</address>
</body>
htm</html>
