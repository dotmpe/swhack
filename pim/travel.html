<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>Semantic Web Travel Tools</title>
  <meta name="generator" content="amaya 5.3, see http://www.w3.org/Amaya/" />
</head>

<body>
<p><a href="../../../../">W3C</a> <a href="../../../01/sw/">SWAD</a> <a
href="../">SWAP</a></p>

<h1>Semantic Web Travel Tools</h1>

<p><em>The bane of my existence is doing things I know the computer could do
for me.</em> When I got my proposed July 2001 travel itinerary in email, I
just couldn't bear the thought of manually copying and pasting each field
from the iterary into my calendar:</p>
<ol>
  <li>I'd probably make a mistake, so I'd never trust the results. I'd always
    have to check the travel itinerary again. <em>Never mind the fact that I
    can't make and follow links from calendar entries to mail messages;
    that's for another day...</em></li>
  <li>I might not agree to the proposed itinerary, in which case I'd have to
    decline it and start over when the revision comes in. I might just be
    able to key in the diffs, but that's even more error prone.</li>
</ol>

<h2>Step 1: Grok Legacy Data</h2>

<p>So I wrote a little perl script (<a
href="/2001/07dc-bos/grokNavItin.pl">grokNavItin.pl</a>) to convert the
travel itinerary, which had obviously been dumped from a relational
database...</p>
<pre>&gt;  11 JUL 01  -  WEDNESDAY
&gt;     AIR   AMERICAN AIRLINES    FLT:1364   ECONOMY
&gt;           LV KANSAS CITY INTL             144P           EQP: MD-80
&gt;           DEPART: TERMINAL BUILDING A                    01HR 31MIN
&gt;           AR CHICAGO OHARE                315P           NON-STOP
&gt;           ARRIVE: TERMINAL 3    </pre>

<p>... into RDF. Then I wrote <a href="/2001/07dc-bos/itin2datebook.n3">some
rules</a> to relate this itinerary vocabulary to the <a
href="../../../08/palm56/datebook">RDF vocabulary for the palmpilot
datebook</a> that I had already developed, and presto, my itinerary was in my
calendar. (see <a href="">Makefile</a> for (some of the?) details).</p>

<p><em>[@@image of palm pilot showing flight in the datebook]</em></p>

<p>The next month, I wrote rules like "itineraries that have me leaving
before 30 July are no good" and ran them over the RDF. I was much more
confident having the machine review my itinerary than eyeballing it. The rule
are a bit tedious...</p>
<pre>{
 v:itin a i:Itinerary;
  i:air
    [ i:date v:d1;
      i:LV [ i:place [ t:iata "MCI" ];
             i:time v:t1;
           ];
    ].
  v:d1 log:lessThan "2001-07-30".
}
  log:implies {
   v:itin &lt;#leavesDaysTooSoon&gt; v:d1;
          &lt;#at&gt; v:t1.
}.</pre>

<p>More details: <a href="/2001/08swws67/">SWWS stuff</a>.</p>

<p>I have since revised the little perl script; rather than hoping/pretending
that our travel agent would use an RDF vocabulary, <a
href="grokTravItin.pl">grokTravItin.pl</a> uses terms from the <a
href="http://www.cyc.com/cyc-2-1/vocab/transportation-vocab.html">cyc
ontology of common sense transportation terms</a>. (The opencyc project
released a version in DAML/RDF). I needed a few extra terms:
<code>departureTime</code>, <code>flightNumber</code>, ...; see <a
href="travelTerms">travelTerms</a>, in <a href="travelTerms.rdf">RDF/xml</a>,
<a href="travelTerms.rdf">RDF/n3</a>.</p>

<p>Here's a UML diagram of some of the terms::</p>

<p><img alt="travel terms" src="travelFig.png" /></p>

<p>if your desktop is SVG-happy, <a href="travelFig.svg">travelFig.svg</a> is
nicer. I drew it with dia; you can play <a
href="travelFig.xml">travelFig.xml</a>, the source. I'm working on <a
href="/2002/03owlt/umlp/dia2owl.xsl">dia2owl.xsl</a>, which converts it to
RDF/S: <a href="travelFig.rdf">travelFig.rdf</a>.</p>

<p><em>[@@figure of (some of the) travelTerms? use dia? use
sniffSchema.n3?]</em></p>

<p><em>[@@some figures? SVG view of Makefiles, showing data flow thru
tools?]</em></p>

<h2>Evolution Import</h2>

<p>@@converting flight itineraries to .ics for import into evolution</p>

<h2>Visualization: projecting itineraries on earth maps</h2>

<p>@@visualization with xearth.</p>

<p>details: <a href="/2002/08dc-ymx/Makefile">Makefile</a></p>

<p>results:</p>

<p><img alt="MCI to YMX and back for Extreme 2002"
src="/2002/08dc-ymx/itinView.png" /></p>

<h2>Steps Toward Synchronization</h2>

<p>@@"if it's in my HTML schedule but not in evo, print it out in evo format
for import".</p>

<p>Diagram with more stuff: socialParticipants, eventOccursAt, etc.</p>

<p>details from <a href="/2002/08dc-ymx/Makefile">Makefile</a>:</p>

<p>First, scrape a formal version of my HTML schedule:</p>
<pre>status-formal.rdf: $(TEAM)/connolly.html $(SW)/schedScrape.xsl
   $(XSLTPROC) --novalid $(SW)/schedScrape.xsl $(TEAM)/connolly.html &gt;$@</pre>

<p>Then, convert evo ical to RDF:</p>
<pre>,evocal.rdf: $(HOME)/evolution/local/Calendar/calendar.ics $(PIM)/ical2rdf.pl
$(PERL) $(PIM)/ical2rdf.pl $(HOME)/evolution/local/Calendar/calendar.ics &gt;$@</pre>

<p>Finally, check rules ala:</p>
<pre>evoMissing.n3: status2evo.n3 status-formal.rdf ,evocal.rdf
   $(PYTHON) $(CWM) status2evo.n3 --think &gt;$@</pre>

<p>The rules look like <em>[@@TODO: update ical names w.r.t.
capitalization]</em>:</p>
<pre>{
  :P s:subPropertyOf :cityName.
&lt;status-formal.rdf&gt; log:semantics [
  log:includes {
    :E r:value :WHAT;
      k:socialParticipants [ con:mailbox &lt;mailto:connolly@w3.org&gt; ];
      k:eventOccursAt [ :P :CITYNAME; ];
      k:startingDate [ dt:date :START ];
      k:endingDate [ dt:date :END ];
    
  }].

  # ... date conversion stuff...

   &lt;,evocal.rdf&gt; log:semantics [ log:notIncludes {
     [ ical:DTSTART [ ical:DATE :STARTi ];
       ical:DTEND   [ ical:DATE :ENDi ];
       ical:LOCATION :CITYNAME;
     ]
   }].
} log:implies {
   :SyncInfo :eg
     [ ical:DTSTART [ ical:DATE :STARTi ];
       ical:DTEND   [ ical:DATE :ENDi ];
       ical:LOCATION :CITYNAME;
       ical:UID :UID;
       ical:DTSTAMP :STAMP;
     ]
}.</pre>

<h2>Earlier work</h2>
<ol>
  <li><a href="../../atrip/Makefile">Oct 2000 Makefile</a> - n3 to RDF via
    cwm, RDF to HTML via XSLT. some palm datebook integration.</li>
  <li><a href="/2002/01dc-nj/notes">Jan 2002 NJ WebOnt trip</a>. <a
    href="/2002/01dc-nj/itin2ical.n3">rules</a>, <a
    href="http://lists.w3.org/Archives/Public/www-rdf-calendar/2002Jan/0002.html">iCal/evo
    interop</a></li>
  <li><a href="grokItinTable.xsl">grokItinTable.xsl</a> - convert AA.com
    travel itinerary from (tidied) HTML to RDF</li>
  <li><a href="/Talks/2002/10/09-swcal/all.htm">travel tools presentation</a>
    at calendaring workshop</li>
  <li><a href="/2002/10dc-uk/">Bristol trip stuff</a> Oct 2002
  </li>
  <li><a href="/2001/08swws67/">SWWS: An RDF Calendar Trial</a>, Aug 2001.
    pathcross and such.</li>
</ol>

<h2>Related work</h2>
<ul>
  <li><a href="http://www.daml.org/2001/06/itinerary/">DAML itinerary</a> 
    <p>hmm... flight numbers are numbers, not strings. interesting...</p>
  </li>
  <li>rdf-calendar forum@@</li>
  <li>python/evolution stuff: <a
    href="http://heddley.com/edd/2002/03/05/evocal.py">evocal.py</a> from
    Edd. relies on debian package: evolution-dev. also: <a
    href="http://heddley.com/edd/2002/03/05/python-libversit-0.1.tar.gz">python-libversit</a></li>
  <li>'<a
    href="http://lists.w3.org/Archives/Public/www-archive/2002Jun/0014">interview</a>'
    in #rdfig 12Jun</li>
  <li><a href="http://www.cyc.com/cycdoc/vocab/transportation-vocab.html">cyc
    transportation vocab</a></li>
  <li>lat/long source: <a
    href="http://www.un.org/Depts/unsd/demog/ctry.htm">Capital cities and
    cities of 100,000 and more inhabitants</a>; scraped it in <a
    href="../../../04/mem-news/teamToGlobe.n3">team2Globe.n3</a>; hmm...
    seems to cite NIMA's <a
    href="http://www.nima.mil/gns/html/index.html">GEOnet Names Server</a> as
    its source.</li>
</ul>

<p>Some principles:</p>

<blockquote>
  <ul>
    <li>data that isn't consumed rots. 
      <p>ergo</p>
    </li>
    <li>model only those distinctions that you can exploit.</li>
  </ul>
  <address>
    -- <a
    href="http://lists.w3.org/Archives/Public/www-rdf-calendar/2001Jul/0001.html">me,
    Jul 2001 to rdf-calendar</a>
  </address>
</blockquote>

<p>Possible venues to announce this work:</p>
<ul>
  <li>www-rdf-calendar</li>
  <li>dia development list</li>
  <li>WebOnt (interested in UML/OWL)</li>
  <li>www-rdf-interest (for RDFS/UML stuff)</li>
  <li>IETF calsched WG (working on XML versions of ical)</li>
</ul>
<hr />
<address>
  <p><a href="../../../../People/Connolly/">Dan Connolly</a>, Jun 2002<br />
  $Revision$ of $Date$ by $Author$</p>

</address>
</body>
</html>
