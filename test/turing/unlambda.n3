@prefix : <http://yosi.us/unlambda#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@keywords a, of, is .
#
#
#

{?x a RootExpression} => {?x a NeedsEval} .

{(?x ?y) a NeedsEval}
=>
{?x a NeedsEval .
 ?y a NeedsEval} .

{?x a NeedsEval; log:rawType log:Other} => {?x eval ?x} .

{ (?x ?y) a NeedsEval .
 ?x eval ?a .
 ?y eval ?b .
} 
=>
{(?a ?b) a NeedsApply} .

{(?x ?y) a NeedsEval .
 ?x eval ?a .
 ?y eval ?b .
 (?a ?b) apply ?c . }
=>
{(?x ?y) eval ?c } .


{(k ?x) apply (k ?x)}
<= 
{(k ?x) a NeedsApply} .

{((k ?y) ?x) apply ?y}
<=
{((k ?y) ?x) a NeedsApply} .

{(s ?x) apply (s ?x)}
<= 
{(s ?x) a NeedsApply} .

{((s ?y) ?x) apply ((s ?y) ?x)}
<=
{((s ?y) ?x) a NeedsApply } .

{(((s ?y) ?z) ?x) a NeedsApply .
} =>
{(?y ?x) a NeedsEval .
 (?z ?x) a NeedsEval } .

{(((s ?y) ?z) ?x) a NeedsApply .
 (?y ?x) eval ?r .
 (?z ?x) eval ?s .
}
=>
{(?r ?s) a NeedsEval} .

{(((s ?y) ?z) ?x) a NeedsApply .
 (?y ?x) eval ?r .
 (?z ?x) eval ?s .
 (?r ?s) eval ?w }
=>
{(((s ?y) ?z) ?x) apply ?w} .

{(i ?x) apply ?x}
<= 
{(i ?x) a NeedsApply} .


{(v ?x) apply v}
<=
{(v ?x) a NeedsApply} .
